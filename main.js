(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_handleStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleStatus)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleStatus)}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e,t)}).then(this._handleStatus)}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e,t)}).then(this._handleStatus)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleStatus)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._handleStatus)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._handleStatus)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleStatus)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),n={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__form-input-error",errorClass:"popup__error_visible"};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._selector=n,this._onClickHandler=r.onClick,this._onRemoveHandler=r.onRemove,this._onLikeHandler=r.onLike,this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".element__image"),this._deleteButton=this._element.querySelector(".element__delete-button"),this._likeButton=this._element.querySelector(".element__like-button"),this._likeCount=this._element.querySelector(".element__like-counter"),this._elementTitle=this._element.querySelector(".element__title"),this._elementTitle.textContent=this._data.name,this._elementImage.src=this._data.link,this._elementImage.alt=this._data.name,this._likeCount.textContent=this._data.likes.length,this.isLiked()?this._likeButton.classList.add("element__like-button_active"):this._likeButton.classList.remove("element__like-button_active"),this.isOwner()||this._deleteButton.remove(),this._setEventListeners()}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element}},{key:"isLiked",value:function(){var e=this;return this._data.likes.some((function(t){return e._data.currentUser._id===t._id}))}},{key:"isOwner",value:function(){return this._data.currentUser._id===this._data.owner._id}},{key:"_handleLike",value:function(){var e=this;this._onLikeHandler(this._data,(function(t){e._data.likes=t;var n="element__like-button_active";e.isLiked()?e._likeButton.classList.add(n):e._likeButton.classList.remove(n),e._likeCount.textContent=e._data.likes.length}))}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLike()})),this._deleteButton.addEventListener("click",(function(){e._onRemoveHandler(e._data,(function(){return e._handleDeleteCard()}))})),this._elementImage.addEventListener("click",(function(){e._onClickHandler(e._data)}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._cardContainer=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._cardContainer.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){var t=i._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(i._config.inputErrorClass),t.textContent=""},(r="_hideInputError")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"disabledButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"enableButton",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disabledButton():this.enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={},this._name=document.querySelector(t.nameProfile),this._about=document.querySelector(t.aboutProfile),this._avatar=document.querySelector(t.avatarProfile)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._data}},{key:"setUserInfo",value:function(e){this._data=e,this._name.textContent=e.name,this._about.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._data.avatar=e.avatar,this._avatar.src=e.avatar}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target===t.currentTarget&&e.close()})),this._popup.querySelector(".popup__close-button").addEventListener("click",(function(){e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImg=t._popup.querySelector(".popup__image-content"),t._popupImgName=t._popup.querySelector(".popup__description"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImg.src=t,this._popupImg.alt=e,this._popupImgName.textContent=e,y(b(a.prototype),"open",this).call(this)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function P(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._formInputList=Array.from(n._form.querySelectorAll(".popup__form-input")),n._handleFormSubmit=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._formInputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),S(j(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._form.reset(),S(j(a.prototype),"close",this).call(this)}},{key:"addSaveProcess",value:function(){this._form.querySelector(".popup__submit-button").textContent="Сохранение..."}},{key:"removeSaveProcess",value:function(){this._form.querySelector(".popup__submit-button").textContent="Сохранить"}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=B(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function B(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._confirmButton=t._popup.querySelector(".popup__submit-button_delete"),t._confirmAction=function(){},t}return t=a,(n=[{key:"setConfirmAction",value:function(e){this._confirmAction=e}},{key:"setEventListeners",value:function(){var e=this;this._confirmButton.addEventListener("click",(function(t){e._confirmAction()})),q(A(a.prototype),"setEventListeners",this).call(this)}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=document.querySelector(".profile__edit-button"),V=document.querySelector(".profile__add-button"),H=document.querySelector(".profile__avatar-button"),N=document.querySelector(".popup__form_profile"),J=document.querySelector(".popup__form_new"),F=document.querySelector(".popup__form_avatar"),M=document.querySelector("#popup__item-name"),z=document.querySelector("#popup__item-job"),$=new t({url:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"b8918bb6-8c8c-461f-acb0-f8f8bf54b78b","Content-Type":"application/json"}}),G=new c(n,N);G.enableValidation();var K=new c(n,J);K.enableValidation();var Q=new c(n,F);Q.enableValidation();var W=new g(".popup_full-photo");W.setEventListeners();var X=new s({nameProfile:".profile__author",aboutProfile:".profile__description",avatarProfile:".profile__avatar"});D.addEventListener("click",(function(){var e,t,n;Z.open(),G.enableButton(),t=(e=X.getUserInfo()).name,n=e.about,M.value=t,z.value=n})),V.addEventListener("click",(function(){re.open(),K.disabledButton()})),H.addEventListener("click",(function(){Y.open(),Q.disabledButton()}));var Y=new L(".popup_avatar",(function(e){Y.addSaveProcess(),$.updateAvatar(e).then((function(e){X.setUserAvatar(e),Y.close()})).catch((function(e){console.log(e)})).finally((function(){return Y.removeSaveProcess()}))}));Y.setEventListeners();var Z=new L(".popup_edit-profile",(function(e){Z.addSaveProcess(),$.editUserInfo(e).then((function(e){X.setUserInfo(e),Z.close()})).catch((function(e){console.log(e)})).finally((function(){return Z.removeSaveProcess()}))}));function ee(e){var t=e.name,n=e.link;W.open(t,n)}Z.setEventListeners();var te=function(e){e.currentUser=X.getUserInfo();var t=new o(e,"#card-template",{onClick:ee,onRemove:function(e,t){ne.open(),ne.setConfirmAction((function(){$.deleteCard(e._id).then((function(){t(),ne.close()})).catch((function(e){console.log("Ошибка: ",e)}))}))},onLike:function(e,n){t.isLiked()?$.deleteLike(e._id).then((function(e){return n(e.likes)})).catch((function(e){console.log("Ошибка: ",e)})):$.addLike(e._id).then((function(e){return n(e.likes)})).catch((function(e){console.log("Ошибка: ",e)}))}});return t.generateCard()},ne=new U(".popup_delete-card");ne.setEventListeners();var re=new L(".popup_new-card",(function(e){re.addSaveProcess(),$.addNewCard(e).then((function(e){var t=te(e);oe.addItem(t),re.close()})).catch((function(e){console.log(e)})).finally((function(){return re.removeSaveProcess()}))}));re.setEventListeners();var oe=new a({renderer:function(e){oe.addItem(te(e))}},".elements");Promise.all([$.getUserInfo(),$.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];X.setUserInfo(o),X.setUserAvatar(o),oe.renderItems(i.slice().reverse())}),$).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNKWCxFQUFJNEMsb0JBRUgxTCxNQUFLLFlBQXVCLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGd4QkFBckJzRyxFQUFxQixLQUFYcUYsRUFBVyxLQUMzQnJDLEVBQVFpQixZQUFZakUsR0FDcEJnRCxFQUFRUyxjQUFjekQsR0FDdEJpRixHQUFnQkssWUFBWUQsRUFBTUUsUUFBUUMsVUFDM0MsR0FBRWhELEdBQ0ZrQixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW5zLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLl91cmwgPSBvcHRpb25zLnVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVTdGF0dXMocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVN0YXR1cyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVkaXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5hbWUsYWJvdXQpXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9oYW5kbGVTdGF0dXMpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuYW1lLCBsaW5rKVxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU3RhdHVzKVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU3RhdHVzKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU3RhdHVzKVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU3RhdHVzKVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKVxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU3RhdHVzKVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0taW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19mb3JtLWlucHV0LWVycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnLFxyXG4gIH0sXHJcbl07IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVyKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9vbkNsaWNrSGFuZGxlciA9IGhhbmRsZXIub25DbGljaztcclxuICAgIHRoaXMuX29uUmVtb3ZlSGFuZGxlciA9IGhhbmRsZXIub25SZW1vdmU7XHJcbiAgICB0aGlzLl9vbkxpa2VIYW5kbGVyID0gaGFuZGxlci5vbkxpa2U7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2xpa2VDb3VudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpO1xyXG4gICAgdGhpcy5fZWxlbWVudFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKTtcclxuICAgIHRoaXMuX2VsZW1lbnRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuaXNPd25lcigpKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5saWtlcy5zb21lKChpdGVtKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhLmN1cnJlbnRVc2VyLl9pZCA9PT0gaXRlbS5faWRcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBpc093bmVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuY3VycmVudFVzZXIuX2lkID09PSB0aGlzLl9kYXRhLm93bmVyLl9pZFxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9vbkxpa2VIYW5kbGVyKFxyXG4gICAgICB0aGlzLl9kYXRhLFxyXG4gICAgICAodXBkYXRlZExpa2VzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZGF0YS5saWtlcyA9IHVwZGF0ZWRMaWtlcztcclxuICAgICAgICBjb25zdCBjbGFzc05hbWVMaWtlZCA9ICdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZUxpa2VkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZUxpa2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX29uUmVtb3ZlSGFuZGxlcih0aGlzLl9kYXRhLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9vbkNsaWNrSGFuZGxlcih0aGlzLl9kYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IgKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NhcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGNhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZENvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgZGlzYWJsZWRCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfTtcclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgdGhpcy5fZGF0YSA9IHt9O1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLm5hbWVQcm9maWxlKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuYWJvdXRQcm9maWxlKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmF2YXRhclByb2ZpbGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcclxuICB9IFxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xyXG4gICAgdGhpcy5fZGF0YSA9IHVzZXJEYXRhO1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih1c2VyRGF0YSl7XHJcbiAgICB0aGlzLl9kYXRhLmF2YXRhciA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBwb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICAgICAgICBwb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWcgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNvbnRlbnQnKTtcclxuICAgIHRoaXMuX3BvcHVwSW1nTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGVzY3JpcHRpb24nKTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5fcG9wdXBJbWcuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1nLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltZ05hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19mb3JtLWlucHV0JykpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTYXZlUHJvY2VzcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVTYXZlUHJvY2VzcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b25fZGVsZXRlJyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlybUFjdGlvbiA9ICgpID0+IHsgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb25maXJtQWN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1BY3Rpb24gPSBhY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlybUFjdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW5zLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5jb25zdCBidXR0b25FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYXZhdGFyQ2hhbmdlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idXR0b24nKTtcclxuY29uc3QgZm9ybU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fcHJvZmlsZScpO1xyXG5jb25zdCBmb3JtTmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fbmV3Jyk7XHJcbmNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fYXZhdGFyJyk7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9faXRlbS1uYW1lJyk7XHJcbmNvbnN0IGFib3V0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2l0ZW0tam9iJyk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ4JyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnYjg5MThiYjYtOGM4Yy00NjFmLWFjYjAtZjhmOGJmNTRiNzhiJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZm9ybVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1OYW1lKTtcclxuZm9ybVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZm9ybUFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybU5ld1BsYWNlKTtcclxuZm9ybUFkZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtTmV3QXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtQXZhdGFyKTtcclxuZm9ybU5ld0F2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwb3B1cFBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfZnVsbC1waG90bycpO1xyXG5wb3B1cFBob3RvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maWdQcm9maWxlU2VsZWN0b3IgPSB7XHJcbiAgbmFtZVByb2ZpbGU6ICcucHJvZmlsZV9fYXV0aG9yJyxcclxuICBhYm91dFByb2ZpbGU6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxyXG4gIGF2YXRhclByb2ZpbGU6ICcucHJvZmlsZV9fYXZhdGFyJyxcclxufVxyXG5cclxuY29uc3QgbmV3VXNlciA9IG5ldyBVc2VySW5mbyhjb25maWdQcm9maWxlU2VsZWN0b3IpO1xyXG5cclxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcclxuICBmb3JtUHJvZmlsZS5lbmFibGVCdXR0b24oKTtcclxuICBoYW5kbGVQcm9maWxlKCk7XHJcbn1cclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGUoKSB7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gbmV3VXNlci5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgYWJvdXRJbnB1dC52YWx1ZSA9IGFib3V0O1xyXG59O1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICBwb3B1cEFkZC5vcGVuKCk7XHJcbiAgZm9ybUFkZC5kaXNhYmxlZEJ1dHRvbigpO1xyXG59XHJcbik7XHJcblxyXG5jb25zdCBzdWJtaXRQcm9maWxlRm9ybSA9IChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5hZGRTYXZlUHJvY2VzcygpO1xyXG4gIGFwaS5lZGl0VXNlckluZm8oaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIG5ld1VzZXIuc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cFByb2ZpbGUucmVtb3ZlU2F2ZVByb2Nlc3MoKSlcclxufVxyXG5cclxuYXZhdGFyQ2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxuICBmb3JtTmV3QXZhdGFyLmRpc2FibGVkQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3Qgc3VibWl0QXZhdGFyID0gKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXIuYWRkU2F2ZVByb2Nlc3MoKTtcclxuICBhcGkudXBkYXRlQXZhdGFyKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBuZXdVc2VyLnNldFVzZXJBdmF0YXIocmVzKTtcclxuICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVwQXZhdGFyLnJlbW92ZVNhdmVQcm9jZXNzKCkpXHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9hdmF0YXInLCBzdWJtaXRBdmF0YXIpO1xyXG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9lZGl0LXByb2ZpbGUnLCBzdWJtaXRQcm9maWxlRm9ybSk7XHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKHtuYW1lLCBsaW5rfSkge1xyXG4gIHBvcHVwUGhvdG8ub3BlbihuYW1lLCBsaW5rKVxyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNhcmREYXRhLmN1cnJlbnRVc2VyID0gbmV3VXNlci5nZXRVc2VySW5mbygpO1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgJyNjYXJkLXRlbXBsYXRlJywge1xyXG4gICAgb25DbGljazogaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgb25SZW1vdmU6IChjdXJyZW50Q2FyZCwgcmVtb3ZlQ2FyZCkgPT4ge1xyXG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigpO1xyXG4gICAgICBwb3B1cERlbGV0ZUNhcmQuc2V0Q29uZmlybUFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY3VycmVudENhcmQuX2lkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwOiAnLCBlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG9uTGlrZTogKGN1cnJlbnRDYXJkLCBsaWtlQ2FsbGJhY2spID0+IHtcclxuICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY3VycmVudENhcmQuX2lkKS50aGVuKCh1cGRhdGVkQ2FyZCkgPT4gbGlrZUNhbGxiYWNrKHVwZGF0ZWRDYXJkLmxpa2VzKSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LA6ICcsIGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjdXJyZW50Q2FyZC5faWQpLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiBsaWtlQ2FsbGJhY2sodXBkYXRlZENhcmQubGlrZXMpKVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsDogJywgZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufTtcclxuXHJcbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF9kZWxldGUtY2FyZCcpO1xyXG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHN1Ym1pdEFkZFBsYWNlID0gKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgcG9wdXBBZGQuYWRkU2F2ZVByb2Nlc3MoKTtcclxuICBhcGkuYWRkTmV3Q2FyZChpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIGluaXRpYWxDYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgcG9wdXBBZGQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHBvcHVwQWRkLnJlbW92ZVNhdmVQcm9jZXNzKCkpXHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9uZXctY2FyZCcsIHN1Ym1pdEFkZFBsYWNlKTtcclxucG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIGluaXRpYWxDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG4gIH0sXHJcbn0sICcuZWxlbWVudHMnKTtcclxuXHJcblByb21pc2UuYWxsKFtcclxuICBhcGkuZ2V0VXNlckluZm8oKSxcclxuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCksXHJcbl0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICBuZXdVc2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgIG5ld1VzZXIuc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XHJcbiAgICBpbml0aWFsQ2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMuc2xpY2UoKS5yZXZlcnNlKCkpO1xyXG4gIH0sIGFwaSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTsiXSwibmFtZXMiOlsiQXBpIiwib3B0aW9ucyIsInRoaXMiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVTdGF0dXMiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxpbmsiLCJpZCIsImF2YXRhciIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImRhdGEiLCJzZWxlY3RvciIsImhhbmRsZXIiLCJfZGF0YSIsIl9zZWxlY3RvciIsIl9vbkNsaWNrSGFuZGxlciIsIm9uQ2xpY2siLCJfb25SZW1vdmVIYW5kbGVyIiwib25SZW1vdmUiLCJfb25MaWtlSGFuZGxlciIsIm9uTGlrZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2VsZW1lbnRJbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJfZGVsZXRlQnV0dG9uIiwiX2xpa2VCdXR0b24iLCJfbGlrZUNvdW50IiwiX2VsZW1lbnRUaXRsZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwibGlrZXMiLCJsZW5ndGgiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNPd25lciIsIl9zZXRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInNvbWUiLCJpdGVtIiwiY3VycmVudFVzZXIiLCJfaWQiLCJvd25lciIsInVwZGF0ZWRMaWtlcyIsImNsYXNzTmFtZUxpa2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jYXJkQ29udGFpbmVyIiwiY2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwiaXRlbXMiLCJmb3JFYWNoIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWRCdXR0b24iLCJlbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaXNWYWxpZCIsIlVzZXJJbmZvIiwiX25hbWUiLCJuYW1lUHJvZmlsZSIsIl9hYm91dCIsImFib3V0UHJvZmlsZSIsIl9hdmF0YXIiLCJhdmF0YXJQcm9maWxlIiwidXNlckRhdGEiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltZyIsIl9wb3B1cEltZ05hbWUiLCJQb3B1cFdpdGhGb3JtIiwic2VsZWN0b3JQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9mb3JtSW5wdXRMaXN0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2NvbmZpcm1CdXR0b24iLCJfY29uZmlybUFjdGlvbiIsImFjdGlvbiIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQWRkQ2FyZCIsImF2YXRhckNoYW5nZUJ0biIsImZvcm1OYW1lIiwiZm9ybU5ld1BsYWNlIiwiZm9ybUF2YXRhciIsIm5hbWVJbnB1dCIsImFib3V0SW5wdXQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZm9ybVByb2ZpbGUiLCJlbmFibGVWYWxpZGF0aW9uIiwiZm9ybUFkZCIsImZvcm1OZXdBdmF0YXIiLCJwb3B1cFBob3RvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJuZXdVc2VyIiwicG9wdXBQcm9maWxlIiwib3BlbiIsImdldFVzZXJJbmZvIiwicG9wdXBBZGQiLCJwb3B1cEF2YXRhciIsImlucHV0VmFsdWVzIiwiYWRkU2F2ZVByb2Nlc3MiLCJ1cGRhdGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInJlbW92ZVNhdmVQcm9jZXNzIiwiZWRpdFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJoYW5kbGVDYXJkQ2xpY2siLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiY3VycmVudENhcmQiLCJyZW1vdmVDYXJkIiwicG9wdXBEZWxldGVDYXJkIiwic2V0Q29uZmlybUFjdGlvbiIsImRlbGV0ZUNhcmQiLCJsaWtlQ2FsbGJhY2siLCJkZWxldGVMaWtlIiwidXBkYXRlZENhcmQiLCJhZGRMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkTmV3Q2FyZCIsImluaXRpYWxDYXJkTGlzdCIsImFkZEl0ZW0iLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInJlbmRlckl0ZW1zIiwic2xpY2UiLCJyZXZlcnNlIl0sInNvdXJjZVJvb3QiOiIifQ==